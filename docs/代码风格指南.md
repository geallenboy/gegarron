# ä»£ç é£æ ¼æŒ‡å—

## æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ ESLintã€Prettier å’Œ Git
Hooks æ¥ç»Ÿä¸€ä»£ç é£æ ¼å’Œæ ¼å¼ã€‚æ‰€æœ‰ä»£ç åœ¨æäº¤æ—¶ä¼šè‡ªåŠ¨é€šè¿‡ ESLint æ£€æŸ¥å’Œ Prettier æ ¼å¼åŒ–ã€‚

## å·¥å…·é…ç½®

### ESLint

- **ç‰ˆæœ¬**: 9.39.1ï¼ˆæ‰å¹³é…ç½®æ ¼å¼ï¼‰
- **é…ç½®æ–‡ä»¶**: `eslint.config.js`
- **æ’ä»¶**:
  - `@eslint/js` - ESLint æ¨èè§„åˆ™
  - `typescript-eslint` - TypeScript æ”¯æŒ
  - `eslint-plugin-react-hooks` - React Hooks è§„åˆ™
  - `eslint-plugin-react-refresh` - React Fast Refresh
  - `eslint-config-prettier` - ç¦ç”¨ä¸ Prettier å†²çªçš„è§„åˆ™

### Prettier

- **ç‰ˆæœ¬**: 3.6.2
- **é…ç½®æ–‡ä»¶**: `.prettierrc.json`
- **æ’ä»¶**:
  - `prettier-plugin-tailwindcss` - Tailwind CSS ç±»åæ’åº

### EditorConfig

- **é…ç½®æ–‡ä»¶**: `.editorconfig`
- ç»Ÿä¸€ä¸åŒç¼–è¾‘å™¨çš„åŸºæœ¬ç¼–è¾‘å™¨è®¾ç½®

### Git Hooks

- **å·¥å…·**: Husky 9.1.7 + lint-staged 16.2.6
- **é’©å­**: `.husky/pre-commit`
- **åŠŸèƒ½**: æäº¤å‰è‡ªåŠ¨æ ¼å¼åŒ–å’Œä¿®å¤ä»£ç 

## ä»£ç é£æ ¼è§„èŒƒ

### åŸºæœ¬è§„åˆ™

- **ç¼©è¿›**: 2 ä¸ªç©ºæ ¼
- **æ¢è¡Œç¬¦**: LF (Unix é£æ ¼)
- **æœ€å¤§è¡Œå®½**: 100 å­—ç¬¦
- **å¼•å·**: å•å¼•å·ï¼ˆå­—ç¬¦ä¸²ï¼‰
- **åˆ†å·**: ä½¿ç”¨åˆ†å·
- **å°¾éšé€—å·**: ES5 å…¼å®¹ï¼ˆå¯¹è±¡å’Œæ•°ç»„æœ€åä¸€é¡¹ååŠ é€—å·ï¼‰

### TypeScript è§„åˆ™

```typescript
// âœ… æ¨èï¼šä½¿ç”¨ type imports
import type { FC } from 'react';
import { useState } from 'react';

// âŒ é¿å…ï¼šæ··åˆç±»å‹å’Œå€¼å¯¼å…¥
import { FC, useState } from 'react';

// âœ… æ¨èï¼šä½¿ç”¨ä¸‹åˆ’çº¿å‰ç¼€æ ‡è®°æœªä½¿ç”¨çš„å˜é‡
const handleClick = (_event: MouseEvent) => {
  console.log('clicked');
};

// âœ… æ¨èï¼šä¼˜å…ˆä½¿ç”¨ const
const value = 'hello';

// âŒ é¿å…ï¼šä½¿ç”¨ var
var value = 'hello';

// âœ… æ¨èï¼šä½¿ç”¨ === è¿›è¡Œæ¯”è¾ƒ
if (value === 'hello') {
}

// âŒ é¿å…ï¼šä½¿ç”¨ ==
if (value == 'hello') {
}
```

### React è§„åˆ™

```typescript
// âœ… æ¨èï¼šç»„ä»¶åªå¯¼å‡ºç»„ä»¶
export default function MyComponent() {
  return <div>Hello</div>;
}

// âš ï¸ è­¦å‘Šï¼šå¯¼å‡ºéç»„ä»¶å†…å®¹
export const CONSTANT = 'value';
export default function MyComponent() {
  return <div>Hello</div>;
}

// âœ… æ¨èï¼šéµå¾ª Hooks è§„åˆ™
function MyComponent() {
  const [state, setState] = useState(0);
  useEffect(() => {
    // effect logic
  }, [state]); // âœ… æ­£ç¡®çš„ä¾èµ–é¡¹
}
```

### Tailwind CSS ç±»åé¡ºåº

Prettier ä¼šè‡ªåŠ¨æŒ‰ç…§æ¨èé¡ºåºæ’åˆ— Tailwind CSS ç±»åï¼š

```tsx
// âœ… è‡ªåŠ¨æ’åºå
<div className="flex h-full w-full items-center justify-center bg-white p-4 text-black">
  Content
</div>

// åœ¨ cn() å’Œ clsx() å‡½æ•°ä¸­ä¹Ÿä¼šæ’åº
<div className={cn('flex items-center', isActive && 'bg-blue-500', className)}>
  Content
</div>
```

## å¼€å‘å‘½ä»¤

### ä»£ç æ£€æŸ¥

```bash
# è¿è¡Œ ESLint æ£€æŸ¥
pnpm lint

# è¿è¡Œ ESLint å¹¶è‡ªåŠ¨ä¿®å¤é—®é¢˜
pnpm lint:fix

# æ£€æŸ¥ä»£ç æ ¼å¼
pnpm format:check

# æ ¼å¼åŒ–ä»£ç 
pnpm format

# ç±»å‹æ£€æŸ¥
pnpm type-check
```

### Git æäº¤å·¥ä½œæµ â­ æ¨è

```bash
# 1. æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº
git add .

# 2. æäº¤ï¼ˆpre-commit é’©å­ä¼šè‡ªåŠ¨è¿è¡Œï¼‰
git commit -m "feat: æ–°åŠŸèƒ½"

# Git hooks ä¼šè‡ªåŠ¨ï¼š
# âœ… æ ¼å¼åŒ–æš‚å­˜çš„ä»£ç 
# âœ… ä¿®å¤ ESLint é—®é¢˜
# âœ… åªå¤„ç†æš‚å­˜çš„æ–‡ä»¶ï¼ˆé«˜æ•ˆï¼‰
```

**æ³¨æ„**: ç”±äºé…ç½®äº† Git hooksï¼Œé€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨è¿è¡Œ `pnpm format` æˆ–
`pnpm lint:fix`ï¼Œæäº¤æ—¶ä¼šè‡ªåŠ¨å¤„ç†ã€‚

## VSCode é…ç½®

### æ¨èæ‰©å±•

é¡¹ç›®åŒ…å« `.vscode/extensions.json` æ–‡ä»¶ï¼Œæ¨èå®‰è£…ä»¥ä¸‹æ‰©å±•ï¼š

- **ESLint** (`dbaeumer.vscode-eslint`) - ESLint é›†æˆ
- **Prettier** (`esbenp.prettier-vscode`) - Prettier æ ¼å¼åŒ–
- **Tailwind CSS IntelliSense** (`bradlc.vscode-tailwindcss`) - Tailwind
  CSS æ™ºèƒ½æç¤º
- **TypeScript** (`ms-vscode.vscode-typescript-next`) - TypeScript æ”¯æŒ
- **Error Lens** (`usernamehw.errorlens`) - è¡Œå†…æ˜¾ç¤ºé”™è¯¯
- **EditorConfig** (`EditorConfig.EditorConfig`) - EditorConfig æ”¯æŒ

### è‡ªåŠ¨æ ¼å¼åŒ–

é¡¹ç›®å·²é…ç½® VSCode åœ¨ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–å’Œä¿®å¤ ESLint é—®é¢˜ï¼š

```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": "explicit"
  }
}
```

## å¿½ç•¥æ–‡ä»¶

### ESLint å¿½ç•¥

é€šè¿‡ `eslint.config.js` ä¸­çš„ `ignores` é…ç½®ï¼š

```javascript
{
  ignores: ['**/dist', '**/node_modules', '**/.vite', '**/build'];
}
```

### Prettier å¿½ç•¥

é€šè¿‡ `.prettierignore` æ–‡ä»¶é…ç½®ï¼š

```
node_modules
dist
build
.vite
pnpm-lock.yaml
```

## å¸¸è§é—®é¢˜

### 1. ESLint å’Œ Prettier å†²çª

**é—®é¢˜**: ESLint å’Œ Prettier è§„åˆ™å†²çª

**è§£å†³**: é¡¹ç›®å·²é…ç½® `eslint-config-prettier`
æ¥ç¦ç”¨å†²çªçš„ ESLint è§„åˆ™ã€‚å¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š

```bash
# æ£€æŸ¥æ˜¯å¦æ­£ç¡®å®‰è£…
pnpm list eslint-config-prettier

# ç¡®ä¿ eslint.config.js åŒ…å«
import eslintConfigPrettier from 'eslint-config-prettier';
```

### 2. VSCode æœªè‡ªåŠ¨æ ¼å¼åŒ–

**é—®é¢˜**: ä¿å­˜æ—¶æ²¡æœ‰è‡ªåŠ¨æ ¼å¼åŒ–

**è§£å†³**:

1. ç¡®ä¿å®‰è£…äº† Prettier æ‰©å±•
2. æ£€æŸ¥ VSCode è®¾ç½®ï¼š
   ```json
   {
     "editor.formatOnSave": true,
     "editor.defaultFormatter": "esbenp.prettier-vscode"
   }
   ```
3. ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•æœ‰ `.prettierrc.json` æ–‡ä»¶

### 3. Tailwind CSS ç±»åæœªæ’åº

**é—®é¢˜**: Prettier æ²¡æœ‰æ’åº Tailwind ç±»å

**è§£å†³**:

1. ç¡®ä¿å®‰è£…äº† `prettier-plugin-tailwindcss`
2. æ£€æŸ¥ `.prettierrc.json` ä¸­åŒ…å«ï¼š
   ```json
   {
     "plugins": ["prettier-plugin-tailwindcss"]
   }
   ```

### 4. Git hooks æœªè¿è¡Œ

**é—®é¢˜**: æäº¤æ—¶æ²¡æœ‰è¿è¡Œ pre-commit é’©å­

**è§£å†³**:

1. ç¡®ä¿å®‰è£…äº† Husky: `pnpm list husky`
2. æ£€æŸ¥ `.husky/pre-commit` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. ç¡®ä¿æ–‡ä»¶æœ‰æ‰§è¡Œæƒé™: `chmod +x .husky/pre-commit`
4. æ£€æŸ¥ package.json ä¸­çš„ prepare è„šæœ¬: `"prepare": "husky"`

### 5. TypeScript è·¯å¾„åˆ«åæç¤º

**é—®é¢˜**: ä½¿ç”¨è·¯å¾„åˆ«åæ—¶ ESLint æŠ¥é”™

**è§£å†³**:

- ESLint ä¼šä½¿ç”¨ TypeScript çš„é…ç½®è‡ªåŠ¨è§£æè·¯å¾„åˆ«å
- ç¡®ä¿ `tsconfig.json` ä¸­çš„ `paths` é…ç½®æ­£ç¡®

## è‡ªå®šä¹‰è§„åˆ™

å¦‚æœéœ€è¦ä¿®æ”¹è§„åˆ™ï¼Œè¯·ç¼–è¾‘ä»¥ä¸‹æ–‡ä»¶ï¼š

### ESLint è§„åˆ™

ç¼–è¾‘ `eslint.config.js`ï¼š

```javascript
rules: {
  // æ·»åŠ æˆ–ä¿®æ”¹è§„åˆ™
  '@typescript-eslint/no-unused-vars': 'warn',
  'no-console': ['warn', { allow: ['warn', 'error'] }],
}
```

### Prettier è§„åˆ™

ç¼–è¾‘ `.prettierrc.json`ï¼š

```json
{
  "semi": true,
  "tabWidth": 2,
  "printWidth": 100
}
```

### lint-staged è§„åˆ™

ç¼–è¾‘ `package.json` ä¸­çš„ `lint-staged` é…ç½®ï¼š

```json
{
  "lint-staged": {
    "*.{js,jsx,ts,tsx}": ["prettier --write", "eslint --fix"],
    "*.{json,css,md}": ["prettier --write"]
  }
}
```

## å‚è€ƒèµ„æº

- [ESLint æ–‡æ¡£](https://eslint.org/docs/latest/)
- [Prettier æ–‡æ¡£](https://prettier.io/docs/en/)
- [TypeScript ESLint](https://typescript-eslint.io/)
- [Prettier Tailwind Plugin](https://github.com/tailwindlabs/prettier-plugin-tailwindcss)
- [EditorConfig](https://editorconfig.org/)
- [Husky æ–‡æ¡£](https://typicode.github.io/husky/)
- [lint-staged æ–‡æ¡£](https://github.com/lint-staged/lint-staged)

## è´¡çŒ®æŒ‡å—

æäº¤ä»£ç æ—¶ï¼ŒGit hooks ä¼šè‡ªåŠ¨ç¡®ä¿ï¼š

1. âœ… æ‰€æœ‰æš‚å­˜çš„ä»£ç å·²é€šè¿‡ Prettier æ ¼å¼åŒ–
2. âœ… æ‰€æœ‰æš‚å­˜çš„ä»£ç å·²é€šè¿‡ ESLint ä¿®å¤
3. âœ… ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ

**æ¨èå·¥ä½œæµ**:

```bash
# å¼€å‘ä¸­ï¼ˆVSCode ä¼šåœ¨ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–ï¼‰
# ç¼–å†™ä»£ç ...

# æäº¤ï¼ˆGit hooks ä¼šè‡ªåŠ¨å¤„ç†æ ¼å¼å’Œæ£€æŸ¥ï¼‰
git add .
git commit -m "feat: your feature"

# å¦‚æœéœ€è¦æ‰‹åŠ¨æ£€æŸ¥ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰
pnpm type-check
```

## ä¸‰å±‚ä¿æŠ¤æœºåˆ¶

é¡¹ç›®é…ç½®äº†ä¸‰å±‚ä»£ç è´¨é‡ä¿æŠ¤ï¼š

1. ğŸ”µ **ç¼–è¾‘å™¨å±‚** (VSCode)
   - ä¿å­˜æ—¶è‡ªåŠ¨æ ¼å¼åŒ–
   - ä¿å­˜æ—¶è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
   - å®æ—¶é”™è¯¯æç¤º

2. ğŸŸ¢ **å‘½ä»¤è¡Œå±‚** (æ‰‹åŠ¨)
   - `pnpm format` - æ‰‹åŠ¨æ ¼å¼åŒ–
   - `pnpm lint:fix` - æ‰‹åŠ¨ä¿®å¤
   - `pnpm type-check` - ç±»å‹æ£€æŸ¥

3. ğŸ”´ **Git å±‚** (è‡ªåŠ¨)
   - Pre-commit hook å¼ºåˆ¶æ£€æŸ¥
   - åªå¤„ç†æš‚å­˜çš„æ–‡ä»¶
   - è‡ªåŠ¨æ ¼å¼åŒ–å’Œä¿®å¤
   - æœ€åé˜²çº¿ï¼Œç¡®ä¿æäº¤è´¨é‡

è¿™ä¸‰å±‚ä¿æŠ¤ç¡®ä¿ä»£ç è´¨é‡å’Œä¸€è‡´æ€§ï¼ğŸš€
